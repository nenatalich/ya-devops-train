### Bingo

#### Запуск
1. Указать свои значения в файле terraform/terraform.tfvars, для примера есть рядом terraform.tfvars.sample
2. Установить зависимости ансибла `ansible-galaxy role install -r requirements.yml`
3. В каталоге terraform выполнить `terraform apply`
4. В каталоге ansible выполнить `ansible-playbook playbook.yaml`
5. Приложение готово к работе 
   * Будет доступно на хосте nginx, адрес можно посмотеть в консоли яндекса или в файле ansible/hosts.yaml



#### Общая схема автоматической установки
* Терраформ создает 6 тачек, где две для бинго, одна для nginx, две для постгре и одна для мониторингов. 
* Так же терраформ генерирует файл hosts.yaml и db_vars.yaml для ансибла.
* Ансибл устанавливает бд, настраивает слейв, накатывает схему и миграции, подготавливает всё для приложения 
(генерирует конфиг, создает директории) и запускает его.
* Рядом с бинго так же поднимается promtail для отправки логов в loki, но loki надо уже поднимать руками


#### Что докручено руками после автоматизации
* Установлен самоподписаный сертификат для nginx
* Поднят мониторинг, достаточно скопировать всю папку services/monitoring и выполнить docker-compose up -d
* Настройка logrotate на тачках с бинго
* Настройка nginx экспортера для prometheus, но в итоге выбрал не тот и нет статистики по ручкам
